raindrop:
  graphics:
    formats:
      - color:
        name: "albedo format"
        candidates: [
          VK_FORMAT_R8G8B8_UNORM,
          VK_FORMAT_R8G8B8_UINT,
          VK_FORMAT_R8G8B8A8_UNORM,
          VK_FORMAT_R8G8B8A8_UINT,
        ]

        features:
          optimalTiling: [VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT, VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT]
          linearTiling: []
          buffer: []

        image:
          type: VK_IMAGE_TYPE_2D
          tiling: VK_IMAGE_TILING_OPTIMAL
          usage: [VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT, VK_IMAGE_USAGE_SAMPLED_BIT]
          flags: []
          samples: []
          width: 0
          height: 0
          depth: 0
          arrayLayers: 0
          mipLevels: 0
      
      - vec3:
        name: "vec3 format"
        candidates: [
          VK_FORMAT_R32G32B32_SFLOAT,
          VK_FORMAT_R16G16B16_SFLOAT,
          VK_FORMAT_R32G32B32A32_SFLOAT,
          VK_FORMAT_R16G16B16A16_SFLOAT,
        ]

        features:
          optimalTiling: [VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT, VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT]
          linearTiling: []
          buffer: []

        image:
          type: VK_IMAGE_TYPE_2D
          tiling: VK_IMAGE_TILING_OPTIMAL
          usage: [VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT, VK_IMAGE_USAGE_SAMPLED_BIT]
          flags: []
          samples: []
          width: 0
          height: 0
          depth: 0
          arrayLayers: 0
          mipLevels: 0
      
      - id:
        name: "id format"
        candidates: [
          VK_FORMAT_R8_UINT,
          VK_FORMAT_R16_UINT
        ]

        features:
          optimalTiling: [VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT, VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT]
          linearTiling: []
          buffer: []

        image:
          type: VK_IMAGE_TYPE_2D
          tiling: VK_IMAGE_TILING_OPTIMAL
          usage: [VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT, VK_IMAGE_USAGE_SAMPLED_BIT]
          flags: []
          samples: []
          width: 0
          height: 0
          depth: 0
          arrayLayers: 0
          mipLevels: 0
      
      - depth:
        name: "depth format"
        candidates: [
          VK_FORMAT_D16_UNORM,
          VK_FORMAT_D16_UNORM_S8_UINT,
          VK_FORMAT_D24_UNORM_S8_UINT,
          VK_FORMAT_D32_SFLOAT,
          VK_FORMAT_D32_SFLOAT_S8_UINT,
        ]

        features:
          optimalTiling: [VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT, VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT]
          linearTiling: []
          buffer: []

        image:
          type: VK_IMAGE_TYPE_2D
          tiling: VK_IMAGE_TILING_OPTIMAL
          usage: [VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT, VK_IMAGE_USAGE_SAMPLED_BIT]
          flags: []
          samples: []
          width: 0
          height: 0
          depth: 0
          arrayLayers: 0
          mipLevels: 0

    images:
      - image:
        name: "albedo image"
        format: "albedo format"
        extent:
          width: ${window.width}
          height: ${window.height}
        type: VK_IMAGE_TYPE_2D
        usage: [VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT, VK_IMAGE_USAGE_SAMPLED_BIT]
        initialLayout: VK_IMAGE_LAYOUT_UNDEFINED
        mipLevels: 1
        arrayLayers: 1
        sampleCount: VK_SAMPLE_COUNT_1_BIT
        tiling: VK_IMAGE_TILING_OPTIMAL
        queueFamilies: ['${queues.graphicsFamily}']
        features: [VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT, VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT]

      - image:
        name: texture id image
        format: "id format"
        extent:
          width: ${window.width}
          height: ${window.height}
        type: VK_IMAGE_TYPE_2D
        usage: [VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT, VK_IMAGE_USAGE_SAMPLED_BIT]
        initialLayout: VK_IMAGE_LAYOUT_UNDEFINED
        mipLevels: 1
        arrayLayers: 1
        sampleCount: VK_SAMPLE_COUNT_1_BIT
        tiling: VK_IMAGE_TILING_OPTIMAL
        queueFamilies: ['${queues.graphicsFamily}']
        features: [VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT, VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT]
      
      - image:
        name: normals image
        format: "vec3 format"
        extent:
          width: ${window.width}
          height: ${window.height}
        type: VK_IMAGE_TYPE_2D
        usage: [VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT, VK_IMAGE_USAGE_SAMPLED_BIT]
        initialLayout: VK_IMAGE_LAYOUT_UNDEFINED
        mipLevels: 1
        arrayLayers: 1
        sampleCount: VK_SAMPLE_COUNT_1_BIT
        tiling: VK_IMAGE_TILING_OPTIMAL
        queueFamilies: ['${queues.graphicsFamily}']
        features: [VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT, VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT]

      - image:
        name: positions image
        format: "vec3 format"
        extent:
          width: ${window.width}
          height: ${window.height}
        type: VK_IMAGE_TYPE_2D
        usage: [VK_IMAGE_USAGE_COLOR_ATTACHMENT_BIT, VK_IMAGE_USAGE_SAMPLED_BIT]
        initialLayout: VK_IMAGE_LAYOUT_UNDEFINED
        mipLevels: 1
        arrayLayers: 1
        sampleCount: VK_SAMPLE_COUNT_1_BIT
        tiling: VK_IMAGE_TILING_OPTIMAL
        queueFamilies: ['${queues.graphicsFamily}']
        features: [VK_FORMAT_FEATURE_COLOR_ATTACHMENT_BIT, VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT]
      
      - image:
        name: depth image
        format: "depth format"
        extent:
          width: ${window.width}
          height: ${window.height}
        type: VK_IMAGE_TYPE_2D
        usage: [VK_IMAGE_USAGE_DEPTH_STENCIL_ATTACHMENT_BIT, VK_IMAGE_USAGE_SAMPLED_BIT]
        initialLayout: VK_IMAGE_LAYOUT_UNDEFINED
        mipLevels: 1
        arrayLayers: 1
        sampleCount: VK_SAMPLE_COUNT_1_BIT
        tiling: VK_IMAGE_TILING_OPTIMAL
        queueFamilies: ["${queues.graphicsFamily}"]
        features: [VK_FORMAT_FEATURE_DEPTH_STENCIL_ATTACHMENT_BIT, VK_FORMAT_FEATURE_SAMPLED_IMAGE_BIT]

    imageViews:
      - depth:
        name: depth image view
        base: depth image
        viewType: VK_IMAGE_VIEW_TYPE_2D
        format: ~
        componentMapping:
          r: VK_COMPONENT_SWIZZLE_IDENTITY
          g: VK_COMPONENT_SWIZZLE_IDENTITY
          b: VK_COMPONENT_SWIZZLE_IDENTITY
          a: VK_COMPONENT_SWIZZLE_IDENTITY
        subresourceRange:
          aspectMask: [VK_IMAGE_ASPECT_DEPTH_BIT]
          baseMipLevel: 0
          levelCount: 1
          baseArray: 0
          layerCount: 1
      - albedo:
        name: albedo image view
        base: albedo image
        viewType: VK_IMAGE_VIEW_TYPE_2D
        format: ~
        componentMapping:
          r: VK_COMPONENT_SWIZZLE_IDENTITY
          g: VK_COMPONENT_SWIZZLE_IDENTITY
          b: VK_COMPONENT_SWIZZLE_IDENTITY
          a: VK_COMPONENT_SWIZZLE_IDENTITY
        subresourceRange:
          aspectMask: [VK_IMAGE_ASPECT_COLOR_BIT]
          baseMipLevel: 0
          levelCount: 1
          baseArray: 0
          layerCount: 1

      - textureID:
        name: texture id image view
        base: texture id image
        viewType: VK_IMAGE_VIEW_TYPE_2D
        format: ~
        componentMapping:
          r: VK_COMPONENT_SWIZZLE_IDENTITY
          g: VK_COMPONENT_SWIZZLE_IDENTITY
          b: VK_COMPONENT_SWIZZLE_IDENTITY
          a: VK_COMPONENT_SWIZZLE_IDENTITY
        subresourceRange:
          aspectMask: [VK_IMAGE_ASPECT_COLOR_BIT]
          baseMipLevel: 0
          levelCount: 1
          baseArray: 0
          layerCount: 1
      
      - normals:
        name: normals image view
        base: normals image
        viewType: VK_IMAGE_VIEW_TYPE_2D
        format: ~
        componentMapping:
          r: VK_COMPONENT_SWIZZLE_IDENTITY
          g: VK_COMPONENT_SWIZZLE_IDENTITY
          b: VK_COMPONENT_SWIZZLE_IDENTITY
          a: VK_COMPONENT_SWIZZLE_IDENTITY
        subresourceRange:
          aspectMask: [VK_IMAGE_ASPECT_COLOR_BIT]
          baseMipLevel: 0
          levelCount: 1
          baseArray: 0
          layerCount: 1

      - positions:
        name: positions image view
        base: positions image
        viewType: VK_IMAGE_VIEW_TYPE_2D
        format: ~
        componentMapping:
          r: VK_COMPONENT_SWIZZLE_IDENTITY
          g: VK_COMPONENT_SWIZZLE_IDENTITY
          b: VK_COMPONENT_SWIZZLE_IDENTITY
          a: VK_COMPONENT_SWIZZLE_IDENTITY
        subresourceRange:
          aspectMask: [VK_IMAGE_ASPECT_COLOR_BIT]
          baseMipLevel: 0
          levelCount: 1
          baseArray: 0
          layerCount: 1
      
    renderPasses:
      - renderPass:
        name: render pass
        flags: ~

        attachments:
          - attachment: #depth stencil
            name: depth attachment
            flags: ~
            format: "depth format"
            sampleCount: VK_SAMPLE_COUNT_1_BIT
            loadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            storeOp: VK_ATTACHMENT_STORE_OP_STORE
            stencilLoadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            stencilStoreOp: VK_ATTACHMENT_STORE_OP_DONT_CARE
            initialLayout: VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL
            finalLayout: VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL

          - attachment: # albedo
            name: albedo attachment
            flags: ~
            format: "albedo format"
            sampleCount: VK_SAMPLE_COUNT_1_BIT
            loadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            storeOp: VK_ATTACHMENT_STORE_OP_STORE
            stencilLoadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            stencilStoreOp: VK_ATTACHMENT_STORE_OP_DONT_CARE
            initialLayout: VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL
            finalLayout: VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL

          - attachment: # texture id
            name: texture id attachment
            flags: ~
            format: "id format"
            sampleCount: VK_SAMPLE_COUNT_1_BIT
            loadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            storeOp: VK_ATTACHMENT_STORE_OP_STORE
            stencilLoadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            stencilStoreOp: VK_ATTACHMENT_STORE_OP_DONT_CARE
            initialLayout: VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL
            finalLayout: VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL

          - attachment: # normals
            name: normals attachment
            flags: ~
            format: "vec3 format"
            sampleCount: VK_SAMPLE_COUNT_1_BIT
            loadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            storeOp: VK_ATTACHMENT_STORE_OP_STORE
            stencilLoadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            stencilStoreOp: VK_ATTACHMENT_STORE_OP_DONT_CARE
            initialLayout: VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL
            finalLayout: VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL

          - attachment: # positions
            name: positions attachment
            flags: ~
            format: "vec3 format"
            sampleCount: VK_SAMPLE_COUNT_1_BIT
            loadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            storeOp: VK_ATTACHMENT_STORE_OP_STORE
            stencilLoadOp: VK_ATTACHMENT_LOAD_OP_DONT_CARE
            stencilStoreOp: VK_ATTACHMENT_STORE_OP_DONT_CARE
            initialLayout: VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL
            finalLayout: VK_IMAGE_LAYOUT_SHADER_READ_ONLY_OPTIMAL
        
        subpasses:
          - subpass:
            name: subpass
            flags: ~
            pipelineBindPoint: VK_PIPELINE_BIND_POINT_GRAPHICS
            preserveAttachments: ~
            inputAttachments: ~
            resolveAttachments: ~
            colorAttachments:
              - attachment:
                base: albedo attachment
                layout: VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL
              - attachment:
                base: texture id attachment
                layout: VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL
              - attachment:
                base: normals attachment
                layout: VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL
              - attachment:
                base: positions attachment
                layout: VK_IMAGE_LAYOUT_COLOR_ATTACHMENT_OPTIMAL
            
            depthAttachment:
              base: depth attachment
              layout: VK_IMAGE_LAYOUT_DEPTH_STENCIL_ATTACHMENT_OPTIMAL
          
        dependencies:
          - dependency:
            flags: ~
            srcSubpass: ~
            dstSubpass: subpass
            srcStageMask: [VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT, VK_PIPELINE_STAGE_EARLY_FRAGMENT_TESTS_BIT]
            dstStageMask: [VK_PIPELINE_STAGE_COLOR_ATTACHMENT_OUTPUT_BIT, VK_PIPELINE_STAGE_EARLY_FRAGMENT_TESTS_BIT]
            srcAccessMask: ~
            dstAccessMask: [VK_ACCESS_COLOR_ATTACHMENT_WRITE_BIT, VK_ACCESS_DEPTH_STENCIL_ATTACHMENT_WRITE_BIT]

    framebuffers:
      - framebuffer:
        name: gbuffer
        flags: ~
        renderPass: render pass
        attachments: [
          depth image view,
          albedo image view,
          texture id image view,
          normals image view,
          positions image view
        ]
        width: ${window.width}
        height: ${window.height}
        layers: 1